<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[Android导出Kml]]></title>
      <url>http://yoursite.com/2016/05/21/Android%E5%AF%BC%E5%87%BAKml/</url>
      <content type="html"><![CDATA[<p>转载请注明出处:<a href="http://www.tengfei.science/2016/05/21/Android%E5%AF%BC%E5%87%BAKml/" target="_blank" rel="external">http://www.tengfei.science/2016/05/21/Android%E5%AF%BC%E5%87%BAKml/</a></p>
<p>请先阅读：</p>
<ul>
<li><a href="http://blog.csdn.net/hnyzwtf/article/details/50202405" target="_blank" rel="external">Java(Android)解析KML文件</a></li>
<li><a href="http://blog.csdn.net/hnyzwtf/article/details/51453693" target="_blank" rel="external">Java生成kml文件</a></li>
</ul>
<p>直接上代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br></pre></td><td class="code"><pre><span class="line">package com.soil.soilsampling.ui.parsekml;</span><br><span class="line"></span><br><span class="line">import android.content.Context;</span><br><span class="line">import android.content.res.Resources;</span><br><span class="line"></span><br><span class="line">import android.graphics.Bitmap;</span><br><span class="line">import android.graphics.BitmapFactory;</span><br><span class="line">import android.util.Log;</span><br><span class="line"></span><br><span class="line">import com.soil.soilsampling.R;</span><br><span class="line">import com.soil.soilsampling.base.BaseApplication;</span><br><span class="line">import com.soil.soilsampling.model.CoordinateAlterSample;</span><br><span class="line">import com.soil.soilsampling.support.utils.ToastUtil;</span><br><span class="line"></span><br><span class="line">import org.dom4j.Document;</span><br><span class="line">import org.dom4j.DocumentHelper;</span><br><span class="line">import org.dom4j.Element;</span><br><span class="line">import org.dom4j.io.OutputFormat;</span><br><span class="line">import org.dom4j.io.XMLWriter;</span><br><span class="line"></span><br><span class="line">import java.io.BufferedInputStream;</span><br><span class="line">import java.io.BufferedOutputStream;</span><br><span class="line">import java.io.ByteArrayInputStream;</span><br><span class="line">import java.io.ByteArrayOutputStream;</span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.FileOutputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line">import java.io.OutputStream;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.zip.ZipEntry;</span><br><span class="line">import java.util.zip.ZipOutputStream;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Created by GIS on 2016/5/19 0019.</span><br><span class="line"> * </span><br><span class="line"> */</span><br><span class="line">public class WriteKml &#123;</span><br><span class="line">    private String TAG = &quot;WriteKml&quot;;</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">    * 传入两个参数，一是kml的名称，第二个是坐标点的list</span><br><span class="line">    * */</span><br><span class="line">    public void createKml(String kmlName, List&lt;CoordinateAlterSample&gt; alterSamples) throws Exception</span><br><span class="line">    &#123;</span><br><span class="line">        Element root = DocumentHelper.createElement(&quot;kml&quot;);  //根节点是kml</span><br><span class="line">        Document document = DocumentHelper.createDocument(root);</span><br><span class="line">        //给根节点kml添加属性</span><br><span class="line">        root.addAttribute(&quot;xmlns&quot;, &quot;http://www.opengis.net/kml/2.2&quot;)</span><br><span class="line">                .addAttribute(&quot;xmlns:gx&quot;, &quot;http://www.google.com/kml/ext/2.2&quot;)</span><br><span class="line">                .addAttribute(&quot;xmlns:xsi&quot;, &quot;http://www.w3.org/2001/XMLSchema-instance&quot;)</span><br><span class="line">                .addAttribute(&quot;xsi:schemaLocation&quot;,</span><br><span class="line">                        &quot;http://www.opengis.net/kml/2.2 http://schemas.opengis.net/kml/2.2.0/ogckml22.xsd http://www.google.com/kml/ext/2.2 http://code.google.com/apis/kml/schema/kml22gx.xsd&quot;);</span><br><span class="line"></span><br><span class="line">        //给根节点kml添加子节点  Document</span><br><span class="line">        Element documentElement = root.addElement(&quot;Document&quot;);</span><br><span class="line"></span><br><span class="line">        documentElement.addElement(&quot;name&quot;).addText(kmlName); //添加name节点</span><br><span class="line">        documentElement.addElement(&quot;Snippet&quot;).addText(&quot;&quot;); //Snippet节点</span><br><span class="line">        Element folderElement = documentElement.addElement(&quot;Folder&quot;);//Folder节点</span><br><span class="line">        folderElement.addAttribute(&quot;id&quot;, &quot;FeatureLayer0&quot;);</span><br><span class="line">        //给Folder节点添加子节点</span><br><span class="line">        folderElement.addElement(&quot;name&quot;).addText(kmlName);</span><br><span class="line">        folderElement.addElement(&quot;Snippet&quot;).addText(&quot;&quot;);</span><br><span class="line">        //循环添加每一个Placemark节点，有几个坐标点就有几个Placemark节点</span><br><span class="line">        for (int i = 0; i &lt; alterSamples.size(); i++) &#123;</span><br><span class="line">            Element placeMarkElement = folderElement.addElement(&quot;Placemark&quot;);</span><br><span class="line">            placeMarkElement.addAttribute(&quot;id&quot;, alterSamples.get(i).getName());</span><br><span class="line">            placeMarkElement.addElement(&quot;name&quot;).addText(alterSamples.get(i).getName());</span><br><span class="line">            placeMarkElement.addElement(&quot;Snippet&quot;).addText(&quot;&quot;);</span><br><span class="line">            placeMarkElement.addElement(&quot;description&quot;).addCDATA(getCdataContent(alterSamples.get(i).getName(),</span><br><span class="line">                    alterSamples.get(i).getName(), String.valueOf(alterSamples.get(i).getX()), String.valueOf(alterSamples.get(i).getY()),</span><br><span class="line">                    alterSamples.get(i).getCostValue()));</span><br><span class="line">            placeMarkElement.addElement(&quot;styleUrl&quot;).addText(&quot;#IconStyle00&quot;);</span><br><span class="line">            Element pointElement = placeMarkElement.addElement(&quot;Point&quot;);</span><br><span class="line">            pointElement.addElement(&quot;altitudeMode&quot;).addText(&quot;clampToGround&quot;);</span><br><span class="line">            //添加每一个坐标点的经纬度坐标</span><br><span class="line">            //pointElement.addElement(&quot;coordinates&quot;).addText(&quot;119.39986000,31.13396700000143,0&quot;);</span><br><span class="line">            pointElement.addElement(&quot;coordinates&quot;).addText(String.valueOf(alterSamples.get(i).getX()) + &quot;,&quot; +</span><br><span class="line">                    String.valueOf(alterSamples.get(i).getY()) + &quot;,&quot; + &quot;0&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        Element styleElement = documentElement.addElement(&quot;Style&quot;);//Style节点</span><br><span class="line">        styleElement.addAttribute(&quot;id&quot;, &quot;IconStyle00&quot;);</span><br><span class="line">        // IconStyle</span><br><span class="line">        Element iconStyleElement = styleElement.addElement(&quot;IconStyle&quot;);</span><br><span class="line">        Element iconElement = iconStyleElement.addElement(&quot;Icon&quot;);</span><br><span class="line">        iconElement.addElement(&quot;href&quot;).addText(&quot;layer0_symbol.png&quot;);</span><br><span class="line">        iconStyleElement.addElement(&quot;scale&quot;).addText(&quot;0.250000&quot;);</span><br><span class="line">        // LabelStyle</span><br><span class="line">        Element labelStyleElement = styleElement.addElement(&quot;LabelStyle&quot;);</span><br><span class="line">        labelStyleElement.addElement(&quot;color&quot;).addText(&quot;00000000&quot;);</span><br><span class="line">        labelStyleElement.addElement(&quot;scale&quot;).addText(&quot;0.000000&quot;);</span><br><span class="line">        // PolyStyle</span><br><span class="line">        Element polyStyleElement = styleElement.addElement(&quot;PolyStyle&quot;);</span><br><span class="line">        polyStyleElement.addElement(&quot;color&quot;).addText(&quot;ff000000&quot;);</span><br><span class="line">        polyStyleElement.addElement(&quot;outline&quot;).addText(&quot;0&quot;);</span><br><span class="line"></span><br><span class="line">        //将生成的kml写出本地</span><br><span class="line">        OutputFormat format = OutputFormat.createPrettyPrint();</span><br><span class="line">        format.setEncoding(&quot;utf-8&quot;);//设置编码格式</span><br><span class="line">        //将doc.kml写入到/data/data/&lt;package name&gt;/files目录</span><br><span class="line">        FileOutputStream outputStream = BaseApplication.getContext().openFileOutput(&quot;doc.kml&quot;, Context.MODE_PRIVATE);</span><br><span class="line">        XMLWriter xmlWriter = new XMLWriter(outputStream,format);</span><br><span class="line"></span><br><span class="line">        xmlWriter.write(document);</span><br><span class="line"></span><br><span class="line">        xmlWriter.close();</span><br><span class="line">        //开始对文件进行压缩，一个kml文件其实是一个压缩文件，里面包含一个kml文件和一个png图标</span><br><span class="line"></span><br><span class="line">        String docKmlPath = BaseApplication.getContext().getFilesDir().getAbsolutePath() + &quot;//doc.kml&quot;;</span><br><span class="line"></span><br><span class="line">        zipWriteKml(docKmlPath, kmlName);</span><br><span class="line">        ToastUtil.show(BaseApplication.getContext(), &quot;导出kml成功&quot;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    /*</span><br><span class="line">    * 将生成的kml文件和drawable下的某个png图标进行压缩，生成最终的kml文件，并保存在/data/data/&lt;package name&gt;/files目录</span><br><span class="line">    * */</span><br><span class="line">    public void zipWriteKml(String docKmlPath, String kmlName) throws IOException</span><br><span class="line">    &#123;</span><br><span class="line">        // 最终生成的kml文件</span><br><span class="line">        FileOutputStream fileOutput = BaseApplication.getContext().openFileOutput(kmlName + &quot;.kmz&quot;, Context.MODE_PRIVATE);</span><br><span class="line"></span><br><span class="line">        OutputStream os = new BufferedOutputStream( fileOutput);</span><br><span class="line">        ZipOutputStream zos = new ZipOutputStream(os);</span><br><span class="line">        byte[] buf = new byte[8192];</span><br><span class="line">        int len;</span><br><span class="line"></span><br><span class="line">        //压缩data/data/package name/files目录下的doc.kml</span><br><span class="line">        File file = new File(docKmlPath);</span><br><span class="line">        if ( !file.isFile() )</span><br><span class="line">            Log.d(TAG, &quot;doc.kml is nonexist&quot;);</span><br><span class="line">        ZipEntry ze = new ZipEntry( file.getName() );</span><br><span class="line">        zos.putNextEntry( ze );</span><br><span class="line">        BufferedInputStream bis = new BufferedInputStream( new FileInputStream( file ) );</span><br><span class="line">        while ( ( len = bis.read( buf ) ) &gt; 0 ) &#123;</span><br><span class="line">            zos.write( buf, 0, len );</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        zos.closeEntry();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        // 压缩drawable目录下的图片</span><br><span class="line">        Resources r = BaseApplication.getContext().getResources();</span><br><span class="line">        Bitmap bitmap = BitmapFactory.decodeResource(r, R.drawable.layer0_symbol);</span><br><span class="line">        ByteArrayOutputStream baos = new ByteArrayOutputStream();</span><br><span class="line">        bitmap.compress(Bitmap.CompressFormat.PNG, 100, baos);</span><br><span class="line">        InputStream input = new ByteArrayInputStream(baos.toByteArray());</span><br><span class="line">        int temp = 0;</span><br><span class="line">        ZipEntry entry2 = new ZipEntry(&quot;layer0_symbol.png&quot;);</span><br><span class="line">        zos.putNextEntry(entry2);</span><br><span class="line">        while ((temp = input.read()) != -1)</span><br><span class="line">        &#123;</span><br><span class="line">            zos.write(temp);</span><br><span class="line">        &#125;</span><br><span class="line">        input.close();</span><br><span class="line">        zos.closeEntry();</span><br><span class="line"></span><br><span class="line">       /* for (int i=0;i &lt; files.length;i++) &#123;</span><br><span class="line">            File file = new File(files[i]);</span><br><span class="line">            if ( !file.isFile() )</span><br><span class="line">                continue;</span><br><span class="line">            ZipEntry ze = new ZipEntry( file.getName() );</span><br><span class="line">            zos.putNextEntry( ze );</span><br><span class="line">            BufferedInputStream bis = new BufferedInputStream( new FileInputStream( file ) );</span><br><span class="line">            while ( ( len = bis.read( buf ) ) &gt; 0 ) &#123;</span><br><span class="line">                zos.write( buf, 0, len );</span><br><span class="line">                Log.d(TAG, &quot;we are zipping &quot;+ file.getName());</span><br><span class="line">            &#125;</span><br><span class="line">            zos.closeEntry();</span><br><span class="line">        &#125;*/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        zos.closeEntry();</span><br><span class="line">        zos.close();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    /*</span><br><span class="line">    * 生成kml的html备注,在description节点下</span><br><span class="line">    * */</span><br><span class="line">    public String getCdataContent(String id, String placeMarkName, String x, String y, String costValue)</span><br><span class="line">    &#123;</span><br><span class="line">        StringBuffer buffer = new StringBuffer();</span><br><span class="line">        buffer.append(&quot;&lt;html xmlns:fo=\&quot;http://www.w3.org/1999/XSL/Format\&quot; xmlns:msxsl=\&quot;urn:schemas-microsoft-com:xslt\&quot;&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;head&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;META http-equiv=\&quot;Content-Type\&quot; content=\&quot;text/html\&quot;&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;meta http-equiv=\&quot;content-type\&quot; content=\&quot;text/html; charset=UTF-8\&quot;&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;/head&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;body style=\&quot;margin:0px 0px 0px 0px;overflow:auto;background:#FFFFFF;\&quot;&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;table style=\&quot;font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-collapse:collapse;padding:3px 3px 3px 3px\&quot;&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;tr style=\&quot;text-align:center;font-weight:bold;background:#9CBCE2\&quot;&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;td&gt;&quot;).append(placeMarkName).append(&quot;&lt;/td&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;/tr&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;tr&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;td&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;table style=\&quot;font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-spacing:0px; padding:3px 3px 3px 3px\&quot;&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;tr bgcolor=\&quot;#D4E4F3\&quot;&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;td&gt;ID&lt;/td&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;td&gt;&quot;).append(id).append(&quot;&lt;/td&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;/tr&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;tr&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;td&gt;name&lt;/td&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;td&gt;&quot;).append(placeMarkName).append(&quot;&lt;/td&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;/tr&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;tr bgcolor=\&quot;#D4E4F3\&quot;&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;td&gt;X&lt;/td&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;td&gt;&quot;).append(x).append(&quot;&lt;/td&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;/tr&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;tr&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;td&gt;Y&lt;/td&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;td&gt;&quot;).append(y).append(&quot;&lt;/td&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;/tr&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;tr bgcolor=\&quot;#D4E4F3\&quot;&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;td&gt;CostValue&lt;/td&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;td&gt;&quot;).append(costValue).append(&quot;&lt;/td&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;/tr&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;/table&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;/td&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;/tr&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;/table&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;/body&gt;&quot;);</span><br><span class="line">        buffer.append(&quot;&lt;/html&gt;&quot;);</span><br><span class="line"></span><br><span class="line">        String cDataContent = buffer.toString();</span><br><span class="line">        return cDataContent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>CoordinateAlterSample类如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * 服务器返回的样点，每一个样点包括一个name,x,y,costValue</span><br><span class="line"> * */</span><br><span class="line">public class CoordinateAlterSample implements Serializable &#123;</span><br><span class="line">	private double x;</span><br><span class="line">	private double y;</span><br><span class="line">	private String name;</span><br><span class="line">	private String costValue;</span><br><span class="line"></span><br><span class="line">	public String getCostValue() &#123;</span><br><span class="line">		return costValue;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setCostValue(String costValue) &#123;</span><br><span class="line">		this.costValue = costValue;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public double getX() &#123;</span><br><span class="line">		return x;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setX(double x) &#123;</span><br><span class="line">		this.x = x;</span><br><span class="line">	&#125;</span><br><span class="line">	public double getY() &#123;</span><br><span class="line">		return y;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setY(double y) &#123;</span><br><span class="line">		this.y = y;</span><br><span class="line">	&#125;</span><br><span class="line">	public String getName() &#123;</span><br><span class="line">		return name;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setName(String name) &#123;</span><br><span class="line">		this.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[在python中调用grass中的模块]]></title>
      <url>http://yoursite.com/2016/05/14/%E5%9C%A8python%E4%B8%AD%E8%B0%83%E7%94%A8grass%E7%9A%84%E6%A8%A1%E5%9D%97/</url>
      <content type="html"><![CDATA[<p>在安装好grass之后，只需设置如下的环境变量，便可在python中调用grass中的模块功能：</p>
<pre><code>GISBASE= D:\Program Files (x86)\GRASS GIS 7.0.svn
PATH=%GISBASE%\etc;%GISBASE%\etc\python;%GISBASE%\lib;%GISBASE%\bin;%GISBASE%\extrabin;C:\Python27\ArcGIS10.1;%GISBASE%\scripts;%GISBASE%\msys\bin;%GISBASE%\Python27\lib
LD_LIBRARY_PATH= %GISBASE%\lib
PYTHONPATH= %GISBASE%\etc\python
PYTHONLIB= C:\Python27\ArcGIS10.1
GRASS_SH= %GISBASE%\msys\bin\sh.exe
</code></pre><p>示例Python程序如下：</p>
<pre><code>import sys
import os
import grass.script as grass

kk = r&quot;E:\Exercise\test\grasstest\dem2.tif&quot;
r = grass.run_command(&apos;r.in.gdal&apos;,
                  flags=&apos;o&apos;,
                  input=kk,
                  output=&quot;mm&quot;,
                  overwrite=True)
print r
r = grass.run_command(&quot;g.region&quot;, rast=&quot;mm&quot;)
print r
</code></pre><p>但是我们需要注意的几个问题：</p>
<ol>
<li>目前grass官网上能下载的最新版本的wingrass（Stand-alone Installer） 版本为7.0.4，<a href="https://grass.osgeo.org/download/software/ms-windows/" title="https://grass.osgeo.org/download/software/ms-windows/" target="_blank" rel="external">https://grass.osgeo.org/download/software/ms-windows/</a>，但是安装之后安装目录下没有文件夹msys，因此环境变量中凡是与msys有关的无法进行设置。本文的解决办法是下载一个旧版本的grass即可，我用的是WinGRASS-7.0.svn版。</li>
<li>有时候在安装旧版本的grass（指的是7.0.3之前的版本）后，启动时会报错。如下图：</li>
</ol>
<p><img src="http://i.imgur.com/4aP9Vv3.jpg" alt=""></p>
<p>第一幅图是启动grass时报错 unable to get current geographic extent. Force quiting wxGUI.，然后根据提示在grass的cmd中运行命令g.region，又报错：g.region.exe无法找到入口，无法定位程序输入点sqlite3_prepare_v2于动态链接库sqlite3.dll上。此时的解决办法是</p>
<blockquote>
<p>The issue is caused by different sqlite3.dll files accessible “on path” to all application. In case of GRASS GIS, some incompatible sqlite3 DLL is picked up by the system rather than using the correct one shipped with GRASS GIS.</p>
<p>Solution: search for all sqlite3.dll files on your computer and remove rename them one by one while trying at the same time to start GRASS GIS successfully. Note that removing some of the other sqlite3.dll files may break the applications which use them (say, while this is possible it has never actually been reported by any user). So, it is a good idea to just rename the DLL file in case you discover that another application needs that particular sqlite3 DLL and you have to reverse the process.</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[欢迎]]></title>
      <url>http://yoursite.com/2016/05/06/%E6%AC%A2%E8%BF%8E/</url>
      <content type="html"><![CDATA[<p>欢迎来到我的博客</p>
<p>搭建博客参考网址：</p>
<p>1 <a href="https://github.com/raytaylorlin/hexo-theme-raytaylorism" target="_blank" rel="external">https://github.com/raytaylorlin/hexo-theme-raytaylorism</a></p>
<p>2 <a href="http://opiece.me/2015/04/09/hexo-guide/" target="_blank" rel="external">http://opiece.me/2015/04/09/hexo-guide/</a></p>
<p>3 <a href="http://blog.csdn.net/lmj623565791/article/details/51319147#rd" target="_blank" rel="external">http://blog.csdn.net/lmj623565791/article/details/51319147#rd</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hello World]]></title>
      <url>http://yoursite.com/2016/05/06/hello-world/</url>
      <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    </entry>
    
  
  
    
    <entry>
      <title></title>
      <url>http://yoursite.com/baidu_verify_hu7LcmdtsJ.html</url>
      <content type="html"><![CDATA[hu7LcmdtsJ]]></content>
    </entry>
    
    <entry>
      <title></title>
      <url>http://yoursite.com/googlebab4ebb8b7887c15.html</url>
      <content type="html"><![CDATA[google-site-verification: googlebab4ebb8b7887c15.html]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[关于]]></title>
      <url>http://yoursite.com/about/index.html</url>
      <content type="html"><![CDATA[<p>大家好，欢迎来到我的个人技术博客。想了解我的更多信息，请关注我的微博，github账号吧</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[读书]]></title>
      <url>http://yoursite.com/reading/index.html</url>
      <content type="html"></content>
    </entry>
    
  
</search>
